ktor {
  deployment {
    projectId = "kloud-test"
    port = 8080
  }

  application {
    modules = [project.kloud.ApplicationKt.isAlive]
  }

  metrics {
    googleCloudMetrics {
      timeSeries {
        name = "time_series"
      }

      metric {
        type = "custom.googleapis.com/"
      }
      monitoredResource {
        type = "gae_app"
        labels {
          project_id = "kloud-test"
          module_id = "kloud"
          version_id = "kloud"
          zone = "us-central1-a"
        }
      }
    }
  }

  security {
    google {
      oauth2 {
        id = ${?GOOGLE_CLIENT_ID}
        secret = ${?GOOGLE_CLIENT_SECRET}
        issuer = "https://localhost:8000"
        paths {
          authorize = "/o/oauth2/auth"
          accessToken = "/o/oauth2/token"
        }
        scopes = ["https://localhost:8000/auth/userinfo.profile"]
      }
      apis {
        userInfo {
          host = "accounts.google.com"
          path = "/oauth2/v2/userinfo"
        }
      }
    }
  }
}